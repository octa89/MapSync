<Window x:Class="WpfMapApp1.LayersVisibilityWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Layer Visibility Control"
        Height="515"
        Width="350"
        WindowStartupLocation="CenterScreen"
        WindowStyle="ToolWindow"
        Background="{DynamicResource WindowBackgroundBrush}">
    <Grid Margin="0,10,0,-6">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                   Text="Layer Visibility Control" 
                   FontSize="14" 
                   FontWeight="Bold" 
                   Margin="0,0,0,10"
                   Foreground="White"
                   HorizontalAlignment="Center"/>

        <!-- Layer Tree -->
        <ScrollViewer Grid.Row="1" 
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Auto" Margin="0,0,0,60">
            <TreeView x:Name="LayersTreeView"
                      Background="Transparent"
                      Foreground="White" Height="379">
                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                        <StackPanel Orientation="Horizontal" Margin="2">
                            <CheckBox Name="LayerCheckBox"
                                      IsChecked="{Binding IsVisible, Mode=TwoWay}"
                                      VerticalAlignment="Center"
                                      Margin="0,0,5,0"
                                      Checked="LayerCheckBox_Checked"
                                      Unchecked="LayerCheckBox_Unchecked"/>
                            <TextBlock Text="{Binding Name}" 
                                       Foreground="White"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>
            </TreeView>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center"
                    Margin="0,0,0,17">
            <Button Content="Show All" 
                    Click="ShowAllButton_Click" Width="97" Height="36" Margin="0,0,8,0"/>
            <Button Content="Hide All" 
                    Click="HideAllButton_Click" Width="91" Height="36" Margin="0,0,8,0"/>
            <Button Content="Save &amp; Close" 
                    Click="SaveAndCloseButton_Click" Width="134" Height="36"/>
        </StackPanel>
    </Grid>
</Window>